---
import BaseLayout from "./BaseLayout.astro";
import type { CollectionEntry } from "astro:content";
import "../styles/prose.css";

interface Props {
    post: CollectionEntry<"posts">;
}

const { post } = Astro.props;
---

<BaseLayout title={post.data.title} description={post.data.description}>
    <article class="post-content">
        <header class="post-header">
            <div class="meta">
                <time datetime={post.data.date.toISOString()}>
                    {
                        post.data.date.toLocaleDateString("en-US", {
                            year: "numeric",
                            month: "long",
                            day: "numeric",
                        })
                    }
                </time>
                <div class="tags">
                    {
                        post.data.tags.map((tag) => (
                            <a href={`/tags/${tag}`} class="tag">
                                #{tag}
                            </a>
                        ))
                    }
                </div>
            </div>
            <h1>{post.data.title}</h1>
            {
                post.data.image && (
                    <img src={post.data.image} alt="" class="hero-image" />
                )
            }
        </header>

        <div class="prose">
            <slot />
        </div>
    </article>
</BaseLayout>

<style>
    .post-header {
        margin-bottom: var(--spacing-xl);
        text-align: center;
    }

    .meta {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1rem;
        color: var(--color-text-muted);
        font-size: 0.875rem;
        margin-bottom: var(--spacing-md);
    }

    .tags {
        display: flex;
        gap: 0.5rem;
    }

    .tag {
        color: var(--color-primary);
        text-decoration: none;
    }

    .tag:hover {
        text-decoration: underline;
    }

    h1 {
        font-size: 2.5rem;
        line-height: 1.2;
        color: var(--color-text);
        margin-bottom: var(--spacing-lg);
    }

    .hero-image {
        border-radius: 8px;
        margin-top: var(--spacing-lg);
    }
</style>
